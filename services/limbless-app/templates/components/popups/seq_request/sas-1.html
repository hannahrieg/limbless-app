<div id="sample-table-submission-container" class="modal-content" style="height: 100%;">
    <div class="modal-header">
        <h1 class="modal-title fs-5">1. Specify Libraries</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
    </div>
    <div class="modal-body">
        <ul class="nav nav-tabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" data-bs-toggle="tab"
                data-bs-target="#input-tab" type="button" role="tab"
                aria-controls="input-tab" aria-selected="true">
                Sheet</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" data-bs-toggle="tab"
                data-bs-target="#help-tab" type="button" role="tab"
                aria-controls="help-tab" aria-selected="false">
                Help</button>
            </li>
        </ul>
        <div class="tab-content pt-3">
            <div class="tab-pane fade show active" id="input-tab" role="tabpanel" tabindex="0">
                <div id="grid" class="spreadsheet-grid"></div>
            </div>
            <div class="tab-pane fade show" id="help-tab" role="tabpanel" tabindex="1">
                {% if type == "raw" %}
                {% include "components/popups/seq_request/raw_instructions.html" %}
                {% elif type == "pooled" %}
                {% include "components/popups/seq_request/pooled_instructions.html" %}
                {% endif %}
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" id="parse-table-btn" class="btn btn-success" hx-target="#sample-table-submission-container"
            hx-swap="outerHTML" hx-include="#sample-table-input-form" hx-encoding="multipart/form-data"
            hx-post="{{ url_for('seq_request_form_htmx.parse_table', seq_request_id=seq_request.id) }}">
            Parse Table
        </button>
    </div>
</div>

<script>
    $(document).ready(function() {
        var data = [[null]];

        jspreadsheet(document.getElementById('grid'), {
            data: data,
            columns: [
                {% for col in columns %}
                {%- if col["type"] == "text" -%}
                { type: "text", title: "{{ col['title'] }}", width: {{ col["width"] }} },
                {%- elif col["type"] == "dropdown" -%}
                { type: "dropdown", title: "{{ col['title'] }}", width: {{ col["width"] }}, source: {{ col["source"] | tojson }}, autocomplete: true },
                {%- endif %}
                {% endfor %}
            ],
            minSpareRows: 10,
        });
    });
</script>