{% from 'components/search_select.jinja2' import search_select_field %}

<div class="modal-content" id="select-experiment-form-container">
    <div class="modal-header">
        <h1 class="modal-title fs-5">Select Experiment</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
    </div>
    <div class="modal-body">
        <div id="select-experiment-form">
            {{ search_select_field(select_experiment_form.experiment, url_for('experiments_htmx.query')) }}
            {{ select_experiment_form.csrf_token() }}
        </div>
    </div>
    <div class="modal-footer">
        <div class="footer-controls">
            <button type="button" class="btn btn-success"
            hx-post="{{ url_for('lane_pools_workflow.select_experiment') }}"
            hx-include="#select-experiment-form"
            hx-target="#"
            hx-swap="outerHTML">
                Select
            </button>
        </div>
    </div>
</div>


<div class="tab-pane fade" id="workflows-tab" role="tabpanel" tabindex="1">
    <div class="d-flex justify-content-between align-items-center">
        <div>
            <h3>Workflows</h3>
        </div>
    </div>
    <div class="workflow-container">
        <div class="card" style="width: 250px;">
            <div class="card-icon">
                <img src="{{ url_for('static', filename='images/new_file.svg') }}" width="60px">
            </div>
            <div class="card-body">
                <h5 class="card-title">Create Sequencing Request</h5>
                <p class="card-text">Create a new sequencing request.</p>
                <a href="{{ url_for('seq_requests_page.seq_requests_page', open_form=1) }}" class="btn btn-primary begin-workflow-btn">Start</a>
            </div>
        </div>
        {% if current_user.is_insider() %}
        <div class="card" style="width: 250px;">
            <div class="card-icon">
                <img src="{{ url_for('static', filename='images/licensed/pool.svg') }}" width="80px">
            </div>
            <div class="card-body">
                <h5 class="card-title">Pool Libraries</h5>
                <p class="card-text">Create pools from libraries or samples received from clients.</p>
                <a href="#" class="btn btn-primary begin-workflow-btn">Start</a>
            </div>
        </div>
        <div class="card" style="width: 250px;">
            <div class="card-icon">
                <img src="{{ url_for('static', filename='images/licensed/calculator.svg') }}" width="90px">
            </div>
            <div class="card-body">
                <h5 class="card-title">Lane Pools</h5>
                <p class="card-text">Checks barcode conflicts, calculates pooling ratios, in preparation of sequencing multiple pools on a single lane.</p>
                <a href="#" class="btn btn-primary begin-workflow-btn" data-bs-toggle="modal"
                    data-bs-target="#select-experiment-form-popup">Start</a>
            </div>
        </div>
        {% endif %}
    </div>
</div>