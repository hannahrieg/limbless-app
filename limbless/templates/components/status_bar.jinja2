{% macro seq_request_status_bar(seq_request) -%}
{% if seq_request.status.value.name == 'Draft' %}
<div class="progress" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100">
    <div class="progress-bar progress-bar-striped bg-transparent text-muted" style="width: 100%">
        {{ SeqRequestStatus.DRAFT.value.name }} {{ SeqRequestStatus.DRAFT.value.description | safe }}
    </div>
</div>
{% elif seq_request.status.value.name == 'Archived' %}
<div class="progress" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100">
<div class="progress-bar progress-bar-striped bg-info text-dark" style="width: 100%">
        {{ SeqRequestStatus.ARCHIVED.value.name }} {{ SeqRequestStatus.ARCHIVED.value.description | safe }}
    </div>
</div>
{% elif seq_request.status.value.name == 'Failed' %}
<div class="progress" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100">
    <div class="progress-bar progress-bar-striped bg-danger" style="width: 100%">
        {{ SeqRequestStatus.FAILED.value.name }} {{ SeqRequestStatus.FAILED.value.description | safe }}
    </div>
</div>
{% else %}
<div class="progress-stacked">
    {% set fill_pct = (100 / SeqRequestStatus.FINISHED.value.id + 1) %}
    {% for status_id in range(1, SeqRequestStatus.FINISHED.value.id + 1) %}
    <div class="progress" role="progressbar" aria-label="Segment one" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width: 20%">
        {% if seq_request.status.value.id >= status_id %}
        <div class="progress-bar bg-tab-10-{{status_id}}">
        {% else %}
        <div class="progress-bar progress-bar-striped text-muted  bg-transparent">
        {% endif %}
        {{ SeqRequestStatus.get(status_id).value.name }} {{ SeqRequestStatus.get(status_id).value.description | safe }}
        </div>
    </div>
    {% endfor %}
</div>
{% endif %}
{%- endmacro %}

{% macro experiment_status_bar(experiment) -%}
{% if experiment.status.value.name == 'Draft' %}
<div class="progress" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100">
    <div class="progress-bar progress-bar-striped bg-transparent" style="width: 100%; color: black;">
        {{ ExperimentStatus.DRAFT.value.name }} {{ ExperimentStatus.DRAFT.value.description | safe }}
    </div>
</div>
{% elif experiment.status.value.name == 'Archived' %}
<div class="progress" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100">
<div class="progress-bar progress-bar-striped bg-info text-dark" style="width: 100%">
        {{ ExperimentStatus.ARCHIVED.value.name }} {{ ExperimentStatus.ARCHIVED.value.description | safe }}
    </div>
</div>
{% elif experiment.status.value.name == 'Failed' %}
<div class="progress" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100">
    <div class="progress-bar progress-bar-striped bg-danger" style="width: 100%">
        {{ ExperimentStatus.FAILED.value.name }} {{ ExperimentStatus.FAILED.value.description | safe }}
    </div>
</div>
{% else %}
<div class="progress-stacked">
    {% set fill_pct = (100 / ExperimentStatus.FINISHED.value.id + 1) %}
    {% for status_id in range(1, ExperimentStatus.FINISHED.value.id + 1) %}
    <div class="progress" role="progressbar" aria-label="Segment one" aria-valuenow="{{ fill_pct }}" aria-valuemin="0" aria-valuemax="100" style="width: {{ fill_pct }}%">
        {% if experiment.status.value.id >= status_id %}
        <div class="progress-bar bg-tab-10-{{status_id}}">
        {% else %}
        <div class="progress-bar progress-bar-striped text-muted  bg-transparent">
        {% endif %}
        {{ ExperimentStatus.get(status_id).value.name }} {{ ExperimentStatus.get(status_id).value.description | safe }}
        </div>
    </div>
    {% endfor %}
</div>
{% endif %}
{%- endmacro %}